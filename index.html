<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Corretor OMR com OpenCV.js</title>
  <script src="https://docs.opencv.org/4.8.0/opencv.js"></script>
  <style>
    body { text-align: center; font-family: sans-serif; }
    video, canvas { width: 90%; max-width: 400px; margin: 10px auto; }
    #nota { font-size: 1.2em; margin: 10px; }
  </style>
</head>
<body>
  <h1>Corretor OMR</h1>
  <video id="videoInput" autoplay playsinline muted></video>
  <canvas id="canvasOutput"></canvas>
  <div id="nota">Aguardando...</div>

  <script>
    const ANSWER_KEY = {0:1,1:4,2:0,3:3,4:1,5:4,6:3,7:2,8:1,9:0};
    const FPS = 10;

    const video = document.getElementById('videoInput');
    const canvasOut = document.getElementById('canvasOutput');
    const notaDiv = document.getElementById('nota');

    const hidden = document.createElement('canvas');
    const hctx = hidden.getContext('2d');

    let cap, src, gray, out;

    function startCamera() {
      navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' }})
       
